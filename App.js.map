{"mappings":"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","sources":["public/js/index.js","public/js/mapbox.js","public/js/login.js","public/js/alerts.js","public/js/updateSettings.js"],"sourcesContent":["/* eslint-disable */\nimport { displayMap } from \"./mapbox\";\nimport { login, logout, signup } from \"./login\";\nimport { updateSettings } from \"./updateSettings\";\nimport { showAlert } from \"./alerts\";\n\n// DOM ELEMENTS\nconst mapBox = document.getElementById(\"map\");\nconst signupForm = document.querySelector(\".form--signup\");\nconst loginForm = document.querySelector(\".form--login\");\nconst logOutBtn = document.querySelector(\".nav__el--logout\");\nconst userDataForm = document.querySelector(\".form-user-data\");\nconst userPasswordForm = document.querySelector(\".form-user-password\");\nconst bookBtn = document.getElementById(\"book-tour\");\n\n// DELEGATION\nif (mapBox) {\n  const locations = JSON.parse(mapBox.dataset.locations);\n  console.log(\"Displaying map with locations:\", locations);\n  displayMap(locations);\n}\n\nif (signupForm)\n  signupForm.addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n    const name = document.getElementById(\"name\").value;\n    const email = document.getElementById(\"email\").value;\n    const password = document.getElementById(\"password\").value;\n    const passwordConfirm = document.getElementById(\"password-confirm\").value;\n    console.log(\"Signing up with email:\", email);\n    signup(name, email, password, passwordConfirm);\n  });\n\nif (loginForm)\n  loginForm.addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n    const email = document.getElementById(\"email\").value;\n    const password = document.getElementById(\"password\").value;\n    console.log(\"Logging in with email:\", email);\n    login(email, password);\n  });\n\nif (logOutBtn)\n  logOutBtn.addEventListener(\"click\", () => {\n    console.log(\"Logging out user\");\n    logout();\n  });\n\nif (userDataForm)\n  userDataForm.addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n    const form = new FormData();\n    form.append(\"name\", document.getElementById(\"name\").value);\n    form.append(\"email\", document.getElementById(\"email\").value);\n    form.append(\"photo\", document.getElementById(\"photo\").files[0]);\n\n    console.log(\"Updating user data\");\n    updateSettings(form, \"data\");\n  });\n\nif (userPasswordForm)\n  userPasswordForm.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n    document.querySelector(\".btn--save-password\").textContent = \"Updating...\";\n\n    const passwordCurrent = document.getElementById(\"password-current\").value;\n    const password = document.getElementById(\"password\").value;\n    const passwordConfirm = document.getElementById(\"password-confirm\").value;\n    console.log(\"Updating user password\");\n    await updateSettings(\n      { passwordCurrent, password, passwordConfirm },\n      \"password\"\n    );\n\n    document.querySelector(\".btn--save-password\").textContent = \"Save password\";\n    document.getElementById(\"password-current\").value = \"\";\n    document.getElementById(\"password\").value = \"\";\n    document.getElementById(\"password-confirm\").value = \"\";\n  });\n\n  \n\nconst alertMessage = document.querySelector(\"body\").dataset.alert;\nif (alertMessage) {\n  console.log(\"Showing alert message:\", alertMessage);\n  showAlert(\"success\", alertMessage, 20);\n}\n","/* eslint-disable */\nexport const displayMap = locations => {\n  mapboxgl.accessToken =\n    'pk.eyJ1Ijoiam9uYXNzY2htZWR0bWFubiIsImEiOiJjam54ZmM5N3gwNjAzM3dtZDNxYTVlMnd2In0.ytpI7V7w7cyT1Kq5rT9Z1A';\n\n  var map = new mapboxgl.Map({\n    container: 'map',\n    style: 'mapbox://styles/jonasschmedtmann/cjvi9q8jd04mi1cpgmg7ev3dy',\n    scrollZoom: false\n    // center: [-118.113491, 34.111745],\n    // zoom: 10,\n    // interactive: false\n  });\n\n  const bounds = new mapboxgl.LngLatBounds();\n\n  locations.forEach(loc => {\n    // Create marker\n    const el = document.createElement('div');\n    el.className = 'marker';\n\n    // Add marker\n    new mapboxgl.Marker({\n      element: el,\n      anchor: 'bottom'\n    })\n      .setLngLat(loc.coordinates)\n      .addTo(map);\n\n    // Add popup\n    new mapboxgl.Popup({\n      offset: 30\n    })\n      .setLngLat(loc.coordinates)\n      .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`)\n      .addTo(map);\n\n    // Extend map bounds to include current location\n    bounds.extend(loc.coordinates);\n  });\n\n  console.log('Fitting map bounds to locations');\n  map.fitBounds(bounds, {\n    padding: {\n      top: 200,\n      bottom: 150,\n      left: 100,\n      right: 100\n    }\n  });\n};\n","/* eslint-disable */\nimport axios from \"axios\";\nimport { showAlert } from \"./alerts\";\n\nexport const login = async (email, password) => {\n  try {\n    const res = await axios({\n      method: \"POST\",\n      url: \"http://127.0.0.1:3000/api/v1/users/login\",\n      data: {\n        email,\n        password,\n        withCredentials: true \n      },\n    });\n\n    if (res.data.status === \"success\") {\n\n      showAlert(\"success\", \"Logged in successfully!\");\n      window.setTimeout(() => {\n        console.log(\"Redirecting to home page...\");\n        location.assign(\"/\");\n      }, 1500)\n    }\n  } catch (err) {\n    console.log(\"Login failed for email:\", email);\n    console.log(\"Error details:\", err.response); // Log the full error response\n    showAlert(\"error\", err.response.data.message);\n  }\n};\n\nexport const signup = async (name, email, password, passwordConfirm) => {\n  try {\n    const res = await axios({\n      method: \"POST\",\n      url: \"http://127.0.0.1:3000/api/v1/users/signup\",\n      data: {\n        name,\n        email,\n        password,\n        passwordConfirm,\n      },\n    });\n    if (res.data.status === \"success\") {\n      showAlert(\"success\", \"Signed up successfully!\");\n      window.setTimeout(() => {\n        console.log(\"Redirecting to home page...\");\n        location.assign(\"/\");\n      }, 1500);\n    }\n  }\n  catch (err) {\n    console.log(\"Signup failed for email:\", email);\n    console.log(\"Error details:\", err.response); // Log the full error response\n    showAlert(\"error\", err.response.data.message);\n  }\n}\n\nexport const logout = async () => {\n  try {\n    const res = await axios({\n      method: \"GET\",\n      url: \"http://127.0.0.1:3000/api/v1/users/logout\",\n    });\n    if ((res.data.status = \"success\")) {\n      console.log(\"Logout successful\");\n      showAlert(\"success\", \"Logout successful\");\n      location.reload(true);\n    }\n  } catch (err) {\n    console.log(\"Logout failed\");\n    showAlert(\"error\", \"Error logging out! Try again.\");\n  }\n};\n","/* eslint-disable */\n\nexport const hideAlert = () => {\n  const el = document.querySelector('.alert');\n  if (el) el.parentElement.removeChild(el);\n  console.log('Alert hidden');\n};\n\n// type is 'success' or 'error'\nexport const showAlert = (type, msg, time = 7) => {\n  hideAlert();\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n  console.log(`Alert shown: ${type} - ${msg}`);\n  window.setTimeout(hideAlert, time * 1000);\n};\n","/* eslint-disable */\nimport axios from 'axios';\nimport { showAlert } from './alerts';\n\n// type is either 'password' or 'data'\nexport const updateSettings = async (data, type) => {\n  try {\n    const url =\n      type === 'password'\n        ? '/api/v1/users/updateMyPassword'\n        : '/api/v1/users/updateMe';\n\n    console.log(`Updating ${type} settings`);\n\n    const res = await axios({\n      method: 'PATCH',\n      url,\n      data\n    });\n\n    if (res.data.status === 'success') {\n      console.log(`${type.toUpperCase()} updated successfully`);\n      showAlert('success', `${type.toUpperCase()} updated successfully!`);\n    }\n  } catch (err) {\n    console.log(`Error updating ${type} settings:`, err.response.data.message);\n    showAlert('error', err.response.data.message);\n  }\n};\n"],"names":[],"version":3,"file":"App.js.map","sourceRoot":"/"}